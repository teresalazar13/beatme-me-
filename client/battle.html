<template name="battle">
  <h3 class="battle-result">
    {{shittyHelper}}</h3>
  <p class="battle-duration">Battle
    <strong>{{timeFromNow}}</strong>
  </p>
  <hr class="battle-duration-hr">
  <p class="battle-opponents">{{challengerUsername}}
    versus
    {{opponentUsername}}
  </p>
  {{#if notFinished}}
    {{#if isInBattle}}
      {{#if hasNotSubmited}}
        <div class="submit-meme">
          <button id="use-template" class="btn btn-default main-choice-buttons">Use template</button>
          <button id="use-url" class="btn btn-default main-choice-buttons">Insert URL</button>
          {{#unless use_url}}
            <select class="main-select" name="meme-template" id="meme-template">
              <option value="default">Choose a used template</option>
              <option value="tenguy">Ten Guy</option>
              <option value="fry">Confused Fry</option>
              <option value="ch">Captain Hindsight</option>
              <option value="yodawg">Xzibit</option>
            </select>
          {{/unless}}
          <form class="submit">
            {{#if use_url}}
              <input type="text" name="urltext" placeholder="Image URL" class="form-control main-inputs" id="urltext"/>
            {{/if}}
            <input type="text" name="toptext" placeholder="Top text" class="form-control main-inputs" id="toptext"/>
            <input type="text" name="bottomtext" placeholder="Bottom text" class="form-control main-inputs" id="bottomtext"/>
            <button id="main-button-submit" type="button" class="btn btn-default meme-submit">
              Submit
            </button>
          </form>
          <img class="preview-meme" src="{{sourcePreview}}" alt="">
        </div>
      {{/if}}
      {{#unless hasNotSubmited}}
        <p style="text-align:center">You have already submitted a meme for this round</p>
      {{/unless}}
    {{/if}}
    {{#unless notFinished}}
      <h2>Finished Battle</h2>
    {{/unless}}
  {{/if}}
  {{#if notFinished}}
    {{#unless isInBattle}}
      <div class="manos">
        <h3 class="instructions">
          VOTE FOR YOUR FAVORITE</h3>
      </div>
    {{/unless}}
  {{/if}}
  {{#each rounds}}
    <p class="battle-category col-md-12">
      <strong>{{category}}</strong>
    </p>
    <p>
      {{opponentUsername}}</p>
    <hr class="battle-category-hr col-md-12">
    <img class="battle-opponent-img col-md-6" src="{{opponent}}">
    <br>
    <br>
    <img class="battle-challenger-img col-md-6" src="{{challenger}}">
  {{/each}}
  {{#if notFinished}}
    {{#unless isInBattle}}
      <div class="votes col-md-12">
        <div class="col-md-6">
          <h3 class="font-footer">{{challengerVotes.length}}
            challenger votes</h3>
          {{#unless votedChallenger}}
            <button id="main-button-submit" type="button" class="btn btn-default challenger-vote">
              {{challengerUsername}}
            </button>
          {{/unless}}
          {{#if votedChallenger}}
            <button id="main-button-submit" type="button" class="btn btn-default challenger-vote" style="background-color: rgb(163,46,46); color:white">
              {{challengerUsername}}
            </button>
          {{/if}}
        </div>
        <div class="col-md-6">
          <h3 class="font-footer">{{opponentVotes.length}}
            opponent votes</h3>
          {{#unless votedOpponent}}
            <button id="main-button-submit" type="button" class="btn btn-default opponent-vote">
              {{opponentUsername}}
            </button>
          {{/unless}}
          {{#if votedOpponent}}
            <button id="main-button-submit" type="button" class="btn btn-default opponent-vote" style="background-color: rgb(163,46,46); color:white">
              {{opponentUsername}}
            </button>
          {{/if}}
        </div>
      </div>
    {{/unless}}
  {{/if}}
</template>
